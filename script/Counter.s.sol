// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import {Script, console2} from "forge-std/Script.sol";

interface IPyth {
    function updatePriceFeeds(bytes[] memory updateData) external payable;
}

contract Counter is Script {
    uint256 pk = uint256(vm.envBytes32("PRIVATE_KEY"));
    address contractAddress = 0x8250f4aF4B972684F7b336503E2D6dFeDeB1487a;

    function setUp() public {}

    function run() public {
        vm.startBroadcast(pk);
        bytes32 priceId = 0xd9d22050e7413a16129f1334cd4dd5a359975ce16389cdadae8f677cf46e2839;

        bytes[] memory updateData = new bytes[](1);
        updateData[0] =
            "0x504e41550100000003b801000000040d00aea5407e806832ed4a997820ae2373abca1ec1eca94fb447d4da5ddbda36ff402b6dba18fc2d4db8eb5bd2d342ab9255c6b4b556f96eeed32f126790cb7568540103fae0e486fcfcce9235afc8b0906a72163d2a077c27fe023bae623d1f710f77e30f02c7b02dec500455325dc8f19ee25521a9c588b5632a26cb068ebad80e6b7b0004e1dcf9b648d3f3bcd0ad58ea5f552d699b4edeaf9a9da1377a5c6bc6ca62b6462730ab7393dc5881a69c934832d27e5bdfffdf4607b76c7e1ec0d42112b33e400106cdaad57d1892047efbe2a63ead77157ca248ba6d1abf538a49fb1da31b884d2f3bd33d512e6536cf017b1e781968122eb6b2d87ebb6ee57525344cb803dee7310108c2b63e5eeb6974ab6e9e83a56e5ebd00929cca2d418d014add9b594ead564c0c2a3cf5ada742a3606765507e5a29bb47f0e1345d6a8a5e3bbd1bf264d0ccaa56000a90abe2787085307d58e2970d7773cda4740dbad4bb8ed7c9e48cabfd5507d154706505a48db5c6378303c4285e08fefb3657faa939a28fd7a19598e065c85d13000b6bcc72c8b7a268ec40187ca6cfbdd42584727bd15509c55f3617e3cf3f8ed38e104b786ca391ea690a3adbed8643b19af6e89b0a93c39e375bc69a9f29db4ee8010c7ce041e9a367376925fe70febabb28af9701083b05c796b7a2ae3df32b7ede3b325ad782862f57ac435fb4ec0a7645de6c5b90e203de03e5b0efa87be7de3940000dd935e7c7dfe361f688c685c1ba81b6459e6cd216b000eb466bb173e6fdb5e8e36a78f3bbbb7e8168f1d39bcd06dc879f3524a14085861fda117b27f48b00dfe3000e4ea68e1939c235716067fc9758697b44abdf22ac6c768ed85eefbafc585e5c713345653aae00003f373a53723f65fa69e25d82290fd9a6ac9fda91b97c9f2dd0000f60055764d0f172af6a37fa791c5568ebc3b7fd4732f2a776c7e6aec94aa14cd30f9e725968a719d3363c5183cb67025141b8185ecd597a8ac11a74f69315e3e40010b08d2a95a8788cd77918a0993be7f450dd0fde8916be92121fe06aacbcda12fd2a682dd03003d0b6af8bde9515ff269acf07bfad1ab29c3f3f613fe52ec7a784001148cdb1c9b559f48127af360ce7baa5871dd500002214f8ee87e81c3472fb9aac48e7f1bca90b57fdeffb9d36529e13e2e37d0fb0d9162614c2305c8d9a952e2f0068011b7e00000000001ae101faedac5851e32b9b23b5f9411a8c2bac4aae3ed4dd7b811dd1a72ea4aa71000000000788ea6e014155575600000000000c9666b7000027104cb50e05bb8fc7e886b0f80781decc90ba1f622401005500d9d22050e7413a16129f1334cd4dd5a359975ce16389cdadae8f677cf46e283900000000004c03cc00000000000033e7fffffff80000000068011b7e0000000068011b7e00000000004c2efa0000000000002d1c0ce4dddaaa9eeb4c5146495b954e9208febed839930ecdb9a836448d48a7659d57a858df479848516fb2eb2837ae6193c745e0463ee11830f6b8d125b245732ee599edd75fa25e390541b70b10746df3c4385262570cefdd3ea774d878a18285973e8c1dc5bf93a64b41a5bad6a42e45e7193cb78d670b462e344e62716482b4c6b784daedb12eb3edf36b58a0703454e14718ff82a0ec95994612ac97a707085b591fdf347741b297919468becdd715854f6e9b012633b5f3e13be3338d39c277f31a4101fcafe098bb45abd45d51a43073ba10fe44afa2e38d2e74b88e9f8ffa95c6531e0c5e1e3faf44f17997ea7311";

        IPyth(contractAddress).updatePriceFeeds{value: 1}(updateData);
        vm.stopBroadcast();
    }
}

/* 
 * Run the script using:
 * forge script --chain mainnet script/Counter.s.sol:Counter --rpc-url $BASE_MAINNET --broadcast
 */
